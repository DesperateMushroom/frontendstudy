<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>day29</title>

    <style>
        html,body{
            height: 100%;
            background-color: lightcyan;
        }
        #box{
            box-sizing: border-box;
            position: absolute;
            top: 50%;
            left: 50%;
            margin: -100px 0 0 -100px;
            width: 200px;
            height: 200px;
            background: lightcoral;
        }
    </style>
</head>
<body>
    <div id="box"></div>

    <script>
        /**
         * 事件是元素天生自带的默认行为
         *   - 不论我们是否给其绑定了方法，当我们操作的时候
         *     也会把对应的事件触发
         *  事件绑定是给元素的某个行为绑定一个方法
         *   - 目的是当事件行为触发的时候，可以做一些事情 
         * 
         * 
         *  
         * 
         * 常用的事件行为
         *   [鼠标事件]
         *     click 点击 （移动端click被识别为单击
         *     dblclick 双击 
         *     mousedown 鼠标按下
         *     mouseup   鼠标抬起
         *     mousemove 鼠标移动
         *     mouseover 鼠标滑过
         *     mouseout  鼠标滑出
         *     mouseenter 鼠标进入
         *     mouseleave 鼠标离开
         *     mousewheel 鼠标滚轮滚动
         * 
         *  [键盘事件]
         *     keydown  键盘按下某个键
         *     keyup    抬起某个键
         *     keypress 除了shift，fn，CapsLock键以外，其他键被按住（连续触发
         * 
         *  [移动端手指事件]
         *   单手指事件模型  Touch
         *     touchstart 手指按下
         *     touchmove  手指移动
         *     touchend   手指松开
         *     touchcancel  操作取消（一般应用于非正常状态下操作结束
         *   多手指事件 Gesture
         *     gesturestart
         *     gesturechange / gestureupdate
         *     gestureend
         *     gesutrecancel 
         *  
         *  [表单元素常用事件]
         *     focus  获取焦点
         *     blur   失去焦点
         *     change 内容改变
         * 
         *  [音视频常用事件]
         *     canplay          可以播放（资源没有加载完，播放中可能会卡顿
         *     canplaythrough   可以播放（资源已经加载完毕，播放中不会卡顿
         *     play     开始播放
         *     playing  播放中
         *     pause    暂停播放
         * 
         *  [其他常用事件]
         *     load 加载完
         *     unload 资源卸载
         *     beforeunload 当前页面关闭之前
         *     error  资源加载失败 
         *     scroll 滚动事件
         *     readystatechange ajax请求状态改变
         *     contextmenu  鼠标右键触发
         * 
         * https://developer.mozilla.org/en-US/docs/Web/API/Element/afterscriptexecute_event
         * 或者查看元素的属性(属性中onxxx就是元素拥有的事件行为)
         * dir(元素)
         * dir(表单)
         * dir(音频)。。。
         */ 
      /*   box.onclick = function(){
            console.log('eee');
        }  */

      /*   window.oncontextmenu = function(ev){
            // ev.preventDefault(); // 阻止默认事件
            alert('右键弹出菜单');
        } */


        /**
         * DOM0事件绑定vsDOM2事件绑定
         *  [DOM0]
         *      元素.on事件行为 = function(){}
         *  [DOM2]
         *      元素.addEventListener(事件行为，function(){},true/false)
         *      ie6-8中不兼容用: 元素.attachEvent('on事件行为',function(){})
         */ 

         /* DOM0事件绑定的原理：给元素的私有属性赋值，当事件触发
                    浏览器会帮我们把赋的值执行，但是这也导致
                    只能给当前元素某一个事件行为绑定一个方法
                     */
        // 只会执行最后添加的那个方法
        /* box.onclick = function(){
            console.log('eee');
        }*/
     /*    box.onclick = function(){
            console.log('fff');
            // 移除事件绑定 DOM0直接赋值为null即可
            box.onclick = null;
        } 
 */

 //=====================================================================
        /* DOM2事件绑定的原理：基于原型链查找机制，找到EventTarget.prototype上的方法并且
                            执行，此方法执行，会把当前元素某个事件行为绑定的所有方法，存放到
                            浏览器默认的事件池中（绑定几个方法，会向事件池存储几个
                            当事件行为触发，会把事件池中存储的对应方法，依次按照顺序执行
                            “给当前元素某一个事件行为绑定多个不同的方法”

        */
 /*       box.addEventListener('click',function(){
            console.log('eee');
       },false);
       box.addEventListener('click',function(){
            console.log('fff');
       },false); */

       // DOM2事件绑定的时候，我们一般都采用实名函数
       // 目的：这样可以基于实名函数去移除事件绑定。
       /* function fn(){
        console.log('eee');
        // 移除事件绑定：从事件池中移除，所以需要指定好事件类型，方法等信息
        //          （要和绑定的时候一样才可以移除
    
        box.removeEventListener('click',fn,false);

       }
       box.addEventListener('click',fn,false);
 */

       // --------------------
       /* function fn1(){console.log(1)};
       function fn2(){console.log(2)};
       function fn3(){console.log(3)};
       // 基于addEventListener向事件池增加方法，存在去重的机制
       // 同一个元素，同一个事件类型，在事件池中只能存储一遍这个方法，不能重复存储
       box.addEventListener('click',fn2,false);
       box.addEventListener('click',fn3,false);
       box.addEventListener('click',fn1,false);
       box.addEventListener('click',fn1,false);
       box.addEventListener('click',fn1,false); */

       // =============================================
       /* DOM0 和 DOM2 可以混在一起用：执行的顺序以绑定的顺序为主 */
/*        box.addEventListener('click',function(){
        console.log('fefe');
       },false);

       box.onclick = function(){
        console.log('efef');
       }

       box.addEventListener('click',function(){
        console.log('ffff');
       },false); */



       // =============================================
       // DOM0中能做的事件绑定的事件行为，DOM2都支持
       // DOM2里面一些事情，DOM0不一定能处理绑定
       // 例如：transitionend, DOMContentLoaded...
       // 现在DOM0可以搞transitionend
     /*   box.style.transition = 'opacity 1s';
       box.ontransitionend = function(){
        console.log('eee');
       }

       box.addEventListener('transitionend',function(){
        console.log('fff')}
        ) */

       // =============================================
      /*   window.addEventListener('load',function(){
            // 所有资源都加载完成触发
            console.log('LOAD');
        });

        window.addEventListener('DOMContentLoaded',function(){
            // 只要DOM结构加载完就会触发
            console.log('DOMContentLoaded');
        });

        // $(document).ready(function(){})
        $(function(){
            // JQ中的这个处理：DOM结构加载完就触发
            // 采用的就是DOMContentLoaded事件
            // 并且依托DOM2事件绑定来处理，所以同一个页面中
            // 此操作可以被使用多次
            
        }); */


        /* jq中的事件绑定采用的都是DOM2事件绑定，例如:on/off/one */

    </script>
    <script src="../day22/node_modules/jquery/dist/jquery.min.js"></script>
    <script>
        let $box = $('#box');
        // one：只绑定一次
        //      相当于dom2里绑完就在函数里remove
        $box.one('click',function(){
            console.log('one');
        });


        
        // window.onload vs $(document).ready()
        // 1. $(document).ready() 采用的是DOM2事件绑定，监听的是DOMContentLoaded这个事件
        //    所以只要DOM结构加载完成就会被出发执行，而且同一个页面中可以使用多次
        //    （绑定不同的方法，因为基于DOM2事件池绑定机制完成的
        // 2. window.onload必须等待所有资源都加载完成才会被触发
        //    采用DOM0事件绑定，同一个页面只能绑定一次（一个方法
        //    像绑定多个也需要改为window.addEventListener('load',function(){})DOM2绑定方法
    </script>
</body>
</html>